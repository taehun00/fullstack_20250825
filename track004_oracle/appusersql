create table appuser(
    APP_USER_ID NUMBER(5) NOT NULL,
    EMAIL       VARCHAR2(100) NOT NULL,
    PASSWORD    VARCHAR2(100),
    MBTI_TYPE_ID    NUMBER(3),
    CREATED_AT  DATE DEFAULT SYSDATE,
    CONSTRAINT pk_appuser PRIMARY KEY (APP_USER_ID)
);

ALTER TABLE appuser MODIFY created_at DEFAULT SYSDATE;
ALTER TABLE appuser
ADD ufile VARCHAR2(255) DEFAULT 'default.png';


create sequence appuser_seq;

desc appuser;

select * from appuser;

insert into appuser values (1, 'iis1@naver.com', '123', 1, SYSDATE);
update appuser
set mbti_type_id = 2
where app_user_id=48;
select * from appuser where app_user_id=39;
select * from appuser where email = 'iis1@naver.com';


delete from appuser where app_user_id=26;



update appuser
set email='iis22@naver.com' , password = '1234' , mbti_type_id = 1
where email='iis2@naver.com' and password='123';

desc emp;


create table authorities(
    userid varchar2(100) not null,
    auth   varchar2(100) not null
);
alter table authorities rename column userid to email;

desc authorities;
desc appuser;

select * from authorities;
insert into authorities values ('iis1@naver.com', 'MEMBER');

select u.email, u.password, a.auth
from appuser u
join authorities a
on u.email = a.email;

select u.email, u.password, a.auth
from appuser u
left outer join authorities a
on u.email = a.email
where u.email = 'iis1@naver.com';

select u.email, u.password, a.auth
from appuser u
right outer join authorities a
on u.email = a.email
where u.email = 'iis1@naver.com';

select email, password, auth
from appuser
natural join authorities
where email = 'iis1@naver.com';

select email, u.password, a.auth
from appuser u
left outer join authorities a
using(email)
where email = 'iis1@naver.com';

desc sboard1;
select * from sboard1;
insert into sboard1 ( ID    , APP_USER_ID , btitle, bcontent, bpass, bfile,  bip )
      select  sboard1_seq.nextval , APP_USER_ID , btitle, bcontent, bpass, bfile,  bip   from sboard1;
      

select *
from ( select row_number() over ( order by create_at desc ) as rnum,
    id , app_user_id , btitle, bcontent, bpass, bfile, bhit, bip, create_at
    from sboard1
) A
where A.rnum between 1 and 10;

commit;