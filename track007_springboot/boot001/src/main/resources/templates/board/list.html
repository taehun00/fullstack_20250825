<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{fragments/layout}">
<!--    #1. layout 렌더링    -->
<head lang="ko">
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
   <div layout:fragment="content">
   		<div th:if="${success}" class="alert alert-info alert-dismissible fade show" role="alert">
            <span th:text="${success}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        
      <h3 class="card-header">MBTI QUEST BOARD</h3>
      <table class="table table-striped table-bordered table-hover">
         <caption>mbti</caption>
         <thead>
            <tr>
               <th scope="col">NO</th>
               <th scope="col">TITLE</th>
               <th scope="col">NAME</th>
               <th scope="col">DATE</th>
               <th scope="col">HIT</th>
            </tr>
         </thead>
         <tbody> 
			<tr th:each= "dto , i : ${list}">
				<td th:text="${paging.listtotal - ((paging.current-1) * paging.onepagelist) - i.index}"></td>
				<td>
					<a  th:text="${dto.btitle}"
                     th:href="@{/board/detail(id=${dto.id})}">
                  </a>
				</td>
				<td th:text="${dto.appUserId}"></td>
				<td th:text="${dto.createdAt}"></td>
				<td th:text="${dto.bhit}"></td>
			</tr>
         </tbody>
      </table>
      <!-- UtilPaging(listtotal=128, onepagelist=10, pagetotal=13, bottomlist=10, pstartno=0, current=2, start=1, end=10) -->
      <nav th:if="${paging!=null}" aria-label="Page navigation">
      	<ul class="pagination justify-content-center">
			<!-- <li  th:text="${paging}"></li> -->
			<li class="page-item" th:if="${paging.start > 1}">
				<a class="page-link"
					th:href="@{/board/list(pageNo=${paging.start - paging.bottomlist})}">이전</a>
			</li>
			<li class="page-item"
				th:each="pageNum :${#numbers.sequence(paging.start, paging.end)}"
				th:classappend="${pageNum == paging.current} ? 'active' "
			>
				<a 	class="page-link"
					th:href="@{/board/list(pageNo=${pageNum})}"
					th:text="${pageNum}"></a>
			</li>
			<li class="page-item" th:if="${paging.end < paging.pagetotal}">
				<a class="page-link"
					th:href="@{/board/list(pageNo=${paging.start + paging.bottomlist})}">다음</a>
			</li>
      	</ul>
      </nav>
      
      
      
      <p class="text-end">
         <a th:href="@{/board/write}"
            class="btn btn-primary">글쓰기</a>
      </p>
      <p class="text-end alert alert-primary">로그인을 하면 글쓰기가능합니다.</p>

	<!-- 🔍 검색 폼 추가 -->
      <form th:action="@{/board/search}" method="get" class="d-flex mb-3">
          <input type="text" name="keyword" class="form-control me-2" 
                 placeholder="검색어를 입력하세요" th:value="${keyword}">
          <button type="submit" class="btn btn-outline-primary">검색</button>
      </form>
	
   </div>
   <!--    #2. layout:fragment="content"    -->
   <!--    http://localhost:8484/boot001/board/list -->
</body>
</html>